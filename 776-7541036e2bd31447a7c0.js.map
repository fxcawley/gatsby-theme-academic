{"version":3,"file":"776-7541036e2bd31447a7c0.js","mappings":"yIA0HA,UAtDa,SAACA,GACZ,IAAQC,EAAaD,EAAbC,GAAIC,EAASF,EAATE,KACZ,GAAkCC,EAAAA,EAAAA,MAA3BC,EAAP,KAEMC,GAFN,KAEiBH,EAAI,QAAWD,EAAX,IAAiBC,EAAjB,QAAkCD,GACjDK,EAAaC,EAAAA,OAAa,MAsChC,OAFAA,EAAAA,WA7B4B,WAC1B,IAAMC,EAASF,EAAWG,QAEtBC,EAAMF,EAAOG,SACbH,EAAOI,gBAAiBF,EAAMF,EAAOI,gBAChCJ,EAAOK,gBAAeH,EAAMF,EAAOK,cAAcF,UAC1D,IAgBMG,EAAU,uHAbA,wCAZV,2BAA4Bb,EAAlC,OADgBC,EAAI,SAAYA,EAAS,KAazB,iBAOE,oEAVAA,EAAI,QAAWD,EAAX,IAAiBC,EAAjB,QAAkCD,GAUtC,8DANkB,SAAdG,EAAuB,GAAvB,kOAMJ,qBAMF,iBAEhBM,EAAIK,OACJL,EAAIM,QAAQF,GACZJ,EAAIO,UAG+B,CAACb,IAGpC,0BACEc,MAAOb,EACPc,IAAKb,EACLc,MAAM,OACNC,YAAa,EACbpB,GAAII","sources":["webpack://example/../gatsby-theme-academic/src/components/Gist/index.jsx"],"sourcesContent":["import React from 'react';\nimport {useTheme} from '@/utils/hooks';\n\n/*\nclass Gist extends React.PureComponent {\n  componentDidMount() {\n    this._updateIframeContent();\n  }\n\n  componentDidUpdate(_prevProps, _prevState) {\n    this._updateIframeContent();\n  }\n\n  _defineUrl() {\n    const { id, file } = this.props;\n\n    const fileArg = file ? `?file=${file}` : '';\n\n    return `https://gist.github.com/${id}.js${fileArg}`;\n  }\n\n  _updateIframeContent() {\n    const { id, file, styles } = this.props;\n    const iframe = this.iframeNode;\n\n    let doc = iframe.document;\n    if (iframe.contentDocument) doc = iframe.contentDocument;\n    else if (iframe.contentWindow) doc = iframe.contentWindow.document;\n    const elementId = file ? `gist-${id}-${file}` : `gist-${id}`;\n\n    const gistLink = this._defineUrl();\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\n    const onloadScript = `<script>function init(){\n      parent.document.getElementById('${elementId}').style.height=document.body.scrollHeight + 'px';\n      var styleNode = document.createElement(\"style\");\n      var styleContent = document.createTextNode(\\`${styles || ''}\\`);\n      styleNode.appendChild(styleContent);\n      document.body.appendChild(styleNode);\n    }</script>`;\n    const headStyles = '<style>*{font-size:12px;}</style>';\n    const resizeScript = 'onload=\"init()\"';\n    const iframeHtml = `<html><head><base target=\"_parent\">${headStyles}</head><body ${resizeScript}>${gistScript}${onloadScript}</body></html>`;\n\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  }\n\n  render() {\n    const { id, file } = this.props;\n    const uniqueId = file ? `gist-${id}-${file}` : `gist-${id}`;\n\n    return (\n      <iframe\n        title={uniqueId}\n        ref={(n) => {\n          this.iframeNode = n;\n        }}\n        width=\"100%\"\n        frameBorder={0}\n        id={uniqueId}\n      />\n    );\n  }\n}\n\n*/\n\nconst Gist = (props) => {\n  const { id, file } = props;\n  const [themeMode, setThemeMode] = useTheme();\n\n  const uniqueId = file ? `gist-${id}-${file}` : `gist-${id}`;\n  const iframeNode = React.useRef(null);\n\n  const defineUrl = () => {\n    const fileArg = file ? `?file=${file}` : '';\n    return `https://gist.github.com/${id}.js${fileArg}`;\n  };\n\n  const updateIframeContent = () => {\n    const iframe = iframeNode.current;\n\n    let doc = iframe.document;\n    if (iframe.contentDocument) doc = iframe.contentDocument;\n    else if (iframe.contentWindow) doc = iframe.contentWindow.document;\n    const elementId = file ? `gist-${id}-${file}` : `gist-${id}`;\n\n    const gistLink = defineUrl();\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\n    const darkCssScript = themeMode !== 'dark' ? '' : `\n      var styleNode = document.createElement(\"link\");\n      styleNode.setAttribute(\"rel\", \"stylesheet\");\n      styleNode.setAttribute(\"href\", \"/github-gist-dark.css\");\n      document.body.appendChild(styleNode);\n    `;\n    const onloadScript = `<script>function init(){\n      parent.document.getElementById('${elementId}').style.height=document.body.scrollHeight + 'px';\n      ${darkCssScript}\n    }</script>`;\n    const headStyles = '<style>*{font-size:12px;} body{margin: 0;} </style>';\n    const resizeScript = 'onload=\"init()\"';\n    const iframeHtml = `<html><head><base target=\"_parent\">${headStyles}</head><body ${resizeScript}>${gistScript}${onloadScript}</body></html>`;\n\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  };\n\n  React.useEffect(updateIframeContent, [themeMode]);\n\n  return (\n    <iframe\n      title={uniqueId}\n      ref={iframeNode}\n      width=\"100%\"\n      frameBorder={0}\n      id={uniqueId}\n    />\n  );\n};\n\nexport default Gist;\n"],"names":["props","id","file","useTheme","themeMode","uniqueId","iframeNode","React","iframe","current","doc","document","contentDocument","contentWindow","iframeHtml","open","writeln","close","title","ref","width","frameBorder"],"sourceRoot":""}